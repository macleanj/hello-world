kind: Pod
metadata:
  name: jnlp
  annotations:
    container.apparmor.security.beta.kubernetes.io/jnlp: unconfined
    # container.seccomp.security.alpha.kubernetes.io/jnlp: unconfined
spec:
  serviceAccountName: jenkins
  containers:
  - name: jnlp
    workingDir: /home/jenkins/agent
    image: r.j3ss.co/img:v0.5.6
    imagePullPolicy: IfNotPresent
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"
        cpu: "500m"
    # securityContext:
    #     rawProc: true
    #     privileged: true
    command:
    - cat
    tty: true
  - name: jnlp
    # image: jenkins/jnlp-slave:3.40-1
    image: jenkins/jnlp-slave:4.0.1-1
    # resources:
    #   limits:
    #     cpu: 1
    #     memory: 2Gi
    #   requests:
    #     cpu: 0.5
    #     memory: 1Gi
  